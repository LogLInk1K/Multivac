---
import { getCollection } from 'astro:content';
import FormattedDate from './FormattedDate.astro';
import { getOriginalFileName } from '../utils/getOriginalFileName';
const defaultCover = '/img/df-cover.webp';

const posts = await getCollection('post', ({ data }) => !data.draft && !data.friends && !data.friendGroups && !data.moments);

// 1. æ ‡ç­¾é€»è¾‘å¤„ç†
const allTags = posts.reduce((acc, post) => {
  const tags = post.data.tags || [];
  tags.forEach(tag => {
    acc[tag] = (acc[tag] || 0) + 1;
  });
  return acc;
}, {} as Record<string, number>);

const sortedTags = Object.entries(allTags).sort((a, b) => b[1] - a[1]);
const randomTags = [...sortedTags].sort(() => Math.random() - 0.5).slice(0, 10);

// 2. ç½‘ç«™ç»Ÿè®¡
const siteStartDate = new Date('2021-01-02');
const today = new Date();
const daysRunning = Math.floor((today.getTime() - siteStartDate.getTime()) / (1000 * 60 * 60 * 24));

// è®¡ç®—æ€»å­—æ•°ï¼ˆé¢„ä¼°ï¼‰
const totalWords = posts.reduce((acc, post) => {
  const bodyLength = post.body?.length || 0;
  return acc + bodyLength;
}, 0);

// è®¡ç®—æ€»åˆ†ç±»æ•°
const allCategories = new Set(posts.map(post => post.data.category).filter(Boolean));
const totalCategories = allCategories.size;

// 3. å‡†å¤‡æ‰€æœ‰æ–‡ç« çš„ç²¾ç®€æ•°æ®ä¾›å‰ç«¯éšæœºæŠ½å–
interface PostSummary {
  id: string;
  originalFileName: string;
  title: string;
  pubDate: string;
  heroImage?: string | { src: string };
  category?: string;
}

const postSummaries: PostSummary[] = posts.map(post => ({
  id: post.id,
  originalFileName: getOriginalFileName(post.id),
  title: post.data.title,
  pubDate: post.data.pubDate.toISOString(),
  heroImage: post.data.heroImage || defaultCover,
  category: post.data.category,
}));

// åˆå§‹æ˜¾ç¤ºçš„ 5 ç¯‡æ–‡ç« 
const initialRandomPosts = [...posts].sort(() => Math.random() - 0.5).slice(0, 3);
---

<aside class="hidden md:block w-[272px] space-y-6">
  <!-- å…¬å‘Šå¡ç‰‡ -->
  <div class="p-6 bg-card-light dark:bg-card-dark rounded-3xl shadow-sm hover:-translate-y-1 hover:shadow-xl transition-all duration-300 border border-transparent hover:border-border-light dark:hover:border-border-dark">
    <h3 class="text-base font-semibold text-text-light dark:text-text-dark uppercase tracking-wider mb-4">å…¬å‘Š</h3>
    <div class="space-y-4">
      <!-- ç¬¬ä¸€æ®µï¼šè™«æ´å›¾ç‰‡ -->
      <div>
        <a href="https://www.foreverblog.cn/go.html" target="_blank" rel="noopener noreferrer">
          <!-- æµ…è‰²ä¸»é¢˜è™«æ´å›¾ç‰‡ -->
          <img
            src="https://foreverblog.cn/assets/logo/wormhole_4_tp.gif"
            alt="è™«æ´"
            class="w-1/2 h-auto dark:hidden cursor-pointer"
          />
          <!-- æ·±è‰²ä¸»é¢˜è™«æ´å›¾ç‰‡ -->
          <img
            src="https://foreverblog.cn/assets/logo/wormhole_2_tp.gif"
            alt="è™«æ´"
            class="w-1/2 h-auto hidden dark:block cursor-pointer"
          />
        </a>
      </div>
      <!-- ç¬¬äºŒæ®µï¼šæ–‡å­—è¯´æ˜ -->
      <p class="text-sm text-text-light dark:text-text-dark">
        è·Ÿç€<span class="font-bold text-primary-light dark:text-primary-dark">è™«æ´</span>ä¸€èµ·éšæœºè·³è½¬åˆ°åå¹´ä¹‹çº¦æ­£å¼æˆå‘˜çš„åšå®¢å§
      </p>
      <!-- ç¬¬ä¸‰æ®µï¼šlogoå›¾ç‰‡ -->
      <div>
        <a href="https://www.foreverblog.cn" target="_blank" rel="noopener noreferrer">
          <img
            src="https://www.foreverblog.cn/assets/logo/logo_en_default.png"
            alt="åå¹´ä¹‹çº¦"
            class="w-1/2 h-auto cursor-pointer"
          />
        </a>
      </div>
      <!-- ç¬¬å››æ®µï¼šæ´»åŠ¨è¯´æ˜ -->
      <p class="text-sm text-text-light dark:text-text-dark">
        æœ¬åšå®¢å·²åŠ å…¥<span class="font-bold text-primary-light dark:text-primary-dark">åå¹´ä¹‹çº¦</span>æ´»åŠ¨
      </p>
    </div>
  </div>

  <div class="p-6 bg-card-light dark:bg-card-dark rounded-3xl shadow-sm hover:-translate-y-1 hover:shadow-xl transition-all duration-300 border border-transparent hover:border-border-light dark:hover:border-border-dark">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-base font-semibold text-text-light dark:text-text-dark uppercase tracking-wider">éšæœºæ¨è</h3>
      <button
        type="button"
        class="js-refresh-trigger group relative p-1.5 rounded-full text-text-light dark:text-text-dark hover:text-primary-light dark:hover:text-primary-dark transition-colors focus:outline-none active:scale-90"
        data-posts={JSON.stringify(postSummaries)}
        aria-label="åˆ·æ–°æ¨è"
      >
        <span class="js-refresh-icon inline-flex transition-transform duration-300 transform-gpu group-hover:rotate-180">
          <svg class="w-6 h-6 transition-transform duration-300 group-hover:scale-75 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
          </svg>
        </span>
        <div class="absolute inset-0 flex items-center justify-center opacity-0 scale-75 transition-all duration-300 group-hover:opacity-100 group-hover:scale-100">
          <div class="bg-primary-light dark:bg-primary-dark rounded-full w-8 h-8 flex items-center justify-center">
            <span class="js-refresh-icon inline-flex transition-transform duration-300 transform-gpu group-hover:rotate-180">
              <svg class="w-6 h-6 text-white dark:text-black transition-transform duration-300 group-hover:scale-75 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
              </svg>
            </span>
          </div>
        </div>
      </button>
    </div>
    <ul class="js-posts-list-container space-y-4 transition-opacity duration-200">
      {initialRandomPosts.map((post) => {
        const originalFileName = getOriginalFileName(post.id);
        const displayImage = post.data.heroImage || defaultCover;
        return (
          <li>
            <a href={`/p/${originalFileName}.html`} class="block group py-2 rounded-3xl hover:scale-105 transition-all duration-200">
              <div class="flex gap-3 items-center">
                <div class="w-16 h-16 flex-shrink-0 bg-hero-light dark:bg-hero-dark rounded-xl overflow-hidden">
                  <div
                    class="w-full h-full bg-cover bg-center"
                    style={`background-image: url('${displayImage}');`}
                    aria-label={post.data.title}
                  ></div>
                </div>
                <div class="flex-1 min-w-0">
                  <p class="text-xs text-text-light dark:text-text-dark opacity-50">
                    <FormattedDate date={post.data.pubDate} />
                    {post.data.category && (
                      <>
                        <span class="mx-1.5">{post.data.category}</span>
                      </>
                    )}
                  </p>
                  <p class="text-sm font-medium text-text-light dark:text-text-dark group-hover:text-primary-light dark:group-hover:text-primary-dark transition-colors line-clamp-2 mt-1">{post.data.title}</p>
                </div>
              </div>
            </a>
          </li>
        );
      })}
    </ul>
  </div>

  <div class="p-6 bg-card-light dark:bg-card-dark rounded-3xl shadow-sm hover:-translate-y-1 hover:shadow-xl transition-all duration-300 border border-transparent hover:border-border-light dark:hover:border-border-dark">
    <h3 class="text-base font-semibold text-text-light dark:text-text-dark uppercase tracking-wider mb-4">æ ‡ç­¾</h3>
    <div class="flex flex-wrap gap-2">
      {randomTags.map(([tag, count]) => (
        <a href={`/tag/${tag}`} class="inline-flex items-center rounded-full text-xs font-medium overflow-hidden hover:scale-105 transition-all duration-200">
          <span class="px-3 py-1 bg-badge-light text-text-light dark:bg-badge-dark dark:text-text-dark">{tag}</span>
          <span class="px-2 py-1 bg-divider-light text-text-light dark:bg-divider-dark dark:text-text-dark opacity-60">{count}</span>
        </a>
      ))}
    </div>
  </div>

<div class="p-6 bg-card-light dark:bg-card-dark rounded-3xl shadow-sm hover:-translate-y-1 hover:shadow-xl transition-all duration-300 border border-transparent hover:border-border-light dark:hover:border-border-dark">
    <h3 class="text-base font-semibold text-text-light dark:text-text-dark uppercase tracking-wider mb-4 flex items-center gap-2">
      <svg class="w-5 h-5 text-[#f26522]" fill="currentColor" viewBox="0 0 24 24">
        <path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248S0 22.546 0 20.752s1.456-3.248 3.252-3.248 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-8.18v4.831c10.555.062 19.121 8.614 19.184 19.17h4.817c-.063-13.215-10.782-23.93-24.001-24.001z"></path>
      </svg>
      RSS è®¢é˜…
    </h3>
    <p class="text-sm text-text-light/70 dark:text-text-dark/70 mb-4 leading-relaxed">è·å–æœ€ç›´æ¥çš„æ–‡ç« æ¨é€ï¼Œæ”¯æŒä¸»æµé˜…è¯»å™¨ã€‚</p>
    
<div class="flex items-stretch h-9 group/rss">
  <div class="flex-grow flex items-center px-3 border-y border-l border-border-light dark:border-border-dark rounded-l-xl bg-background-light dark:bg-background-dark min-w-0">
    <span class="text-[11px] font-mono text-text-light/50 dark:text-text-dark/50 truncate select-all">
      https://log.1k.ink/rss.xml
    </span>
  </div>

  <button
    type="button"
    data-clipboard-text="https://log.1k.ink/rss.xml"
    onclick="
      const self = this;
      const icon = self.querySelector('.copy-icon');
      const text = self.querySelector('.success-msg');
      const status = self.querySelector('.status-text');
      
      icon.classList.add('hidden');
      text.classList.remove('hidden');
      // åŠ¨æ€æ”¹å˜éšè—æ–‡æœ¬çš„å†…å®¹
      status.textContent = 'å·²å¤åˆ¶';
      
      navigator.clipboard.writeText(self.getAttribute('data-clipboard-text')).then(() => {
        setTimeout(() => {
          icon.classList.remove('hidden');
          text.classList.add('hidden');
          status.textContent = 'å¤åˆ¶é“¾æ¥';
        }, 2000);
      });
    "
    class="w-12 h-9 flex items-center justify-center bg-primary-light dark:bg-primary-dark hover:bg-primary-light/80 dark:hover:bg-[#e6ad26] transition-all duration-300 ease-in-out rounded-r-xl flex-shrink-0 group/btn"
  >
    <span class="sr-only status-text">å¤åˆ¶é“¾æ¥</span>

    <svg class="copy-icon w-4 h-4 text-white dark:text-black transition-transform duration-200 group-hover/btn:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
    </svg>

    <span class="success-msg hidden text-sm">ğŸ˜‹</span>
  </button>
</div>
    
    <p class="mt-4 text-[10px] text-text-light dark:text-text-dark opacity-40 italic">æ”¯æŒ Feedlyã€Inoreaderã€Reeder ç­‰</p>
  </div>

  <!-- ç½‘ç«™ç»Ÿè®¡å¡ç‰‡ -->
  <div class="p-6 bg-card-light dark:bg-card-dark rounded-3xl shadow-sm hover:-translate-y-1 hover:shadow-xl transition-all duration-300 border border-transparent hover:border-border-light dark:hover:border-border-dark">
    <h3 class="text-base font-semibold text-text-light dark:text-text-dark uppercase tracking-wider mb-4">ç½‘ç«™ç»Ÿè®¡</h3>
    <div class="grid grid-cols-2 gap-3">
      <div class="relative overflow-hidden text-center p-3 rounded-2xl bg-hover-light dark:bg-hover-dark group hover:scale-105 transition-all duration-200">
        <div class="text-2xl font-bold text-primary-light dark:text-primary-dark mb-1 js-count-up" data-target={posts.length}>0</div>
        <div class="text-xs text-text-light dark:text-text-dark opacity-60 flex items-center justify-center gap-1">
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          æ–‡ç« 
        </div>
      </div>
      <div class="relative overflow-hidden text-center p-3 rounded-2xl bg-hover-light dark:bg-hover-dark group hover:scale-105 transition-all duration-200">
        <div class="text-2xl font-bold text-primary-light dark:text-primary-dark mb-1 js-count-up" data-target={totalCategories}>0</div>
        <div class="text-xs text-text-light dark:text-text-dark opacity-60 flex items-center justify-center gap-1">
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path>
          </svg>
          åˆ†ç±»
        </div>
      </div>
      <div class="relative overflow-hidden text-center p-3 rounded-2xl bg-hover-light dark:bg-hover-dark group hover:scale-105 transition-all duration-200">
        <div class="text-2xl font-bold text-primary-light dark:text-primary-dark mb-1 js-count-up" data-target={Object.keys(allTags).length}>0</div>
        <div class="text-xs text-text-light dark:text-text-dark opacity-60 flex items-center justify-center gap-1">
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
          </svg>
          æ ‡ç­¾
        </div>
      </div>
      <div class="relative overflow-hidden text-center p-3 rounded-2xl bg-hover-light dark:bg-hover-dark group hover:scale-105 transition-all duration-200">
        <div class="text-2xl font-bold text-primary-light dark:text-primary-dark mb-1">
          <span class="js-count-up" data-target={(totalWords / 10000).toFixed(1)}>0</span>w
        </div>
        <div class="text-xs text-text-light dark:text-text-dark opacity-60 flex items-center justify-center gap-1">
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
          </svg>
          æ€»å­—æ•°
        </div>
      </div>
    </div>
    <div class="mt-3 flex items-center justify-between p-3 rounded-2xl bg-primary-light/10 dark:bg-primary-dark/10 group hover:scale-105 transition-all duration-200">
      <div class="flex items-center gap-2 text-sm text-text-light dark:text-text-dark opacity-60">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        å·²è¿è¡Œ
      </div>
      <div class="text-lg font-bold text-primary-light dark:text-primary-dark group-hover:scale-110 transition-transform">
        <span class="js-count-up" data-target={daysRunning}>0</span> å¤©
      </div>
    </div>
  </div>
</aside>

<script is:inline>
  (function() {
    function spinRefreshIcon(btn) {
      const icons = btn.querySelectorAll('.js-refresh-icon');
      icons.forEach((el) => {
        el.classList.remove('is-spinning');
        // è§¦å‘ reflowï¼Œä¿è¯é‡å¤ç‚¹å‡»ä¹Ÿèƒ½é‡æ–°è§¦å‘åŠ¨ç”»
        void el.offsetWidth;
        el.classList.add('is-spinning');
        el.addEventListener('animationend', () => el.classList.remove('is-spinning'), { once: true });
      });
    }

    /**
     * æ‰§è¡Œåˆ·æ–°é€»è¾‘
     * @param {HTMLElement} btn æŒ‰é’®å…ƒç´ 
     */
    function refresh(btn) {
      spinRefreshIcon(btn);
      const cardContainer = btn.closest('div').parentElement;
      const listContainer = cardContainer.querySelector('.js-posts-list-container');
      const rawData = btn.getAttribute('data-posts');

      if (!listContainer || !rawData) return;

      // 1. å¼€å§‹æ·¡å‡º
      listContainer.style.opacity = '0';

      setTimeout(() => {
        try {
          const allPosts = JSON.parse(rawData);
          // ä½¿ç”¨ Fisher-Yates éšæœºç®—æ³•æ´—ç‰Œ
          const shuffled = [...allPosts];
          for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
          }
          const selected = shuffled.slice(0, 3);

          // 2. æ›´æ–° HTML å†…å®¹
          listContainer.innerHTML = selected.map(post => {
            const date = new Date(post.pubDate).toLocaleDateString('zh-CN', {
              year: 'numeric',
              month: 'short',
              day: 'numeric',
            });

            const heroImageHtml = post.heroImage ? `
              <div class="w-16 h-16 flex-shrink-0 bg-hero-light dark:bg-hero-dark rounded-xl overflow-hidden">
                <div
                  class="w-full h-full bg-cover bg-center"
                  style="background-image: url('${post.heroImage}');"
                  aria-label="${post.title}"
                ></div>
              </div>
            ` : '';

            const categoryHtml = post.category ? `
              <span class="mx-1.5">${post.category}</span>
            ` : '';

            return `
              <li>
                <a href="/p/${post.originalFileName}.html" class="block group py-2 rounded-3xl hover:scale-105 transition-all duration-200">
                  <div class="flex gap-3 items-center">
                    ${heroImageHtml}
                    <div class="flex-1 min-w-0">
                      <p class="text-xs text-text-light dark:text-text-dark opacity-50">
                        ${date}
                        ${categoryHtml}
                      </p>
                      <p class="text-sm font-medium text-text-light dark:text-text-dark group-hover:text-primary-light dark:group-hover:text-primary-dark transition-colors line-clamp-2 mt-1">${post.title}</p>
                    </div>
                  </div>
                </a>
              </li>
            `;
          }).join('');

          // 3. å¼€å§‹æ·¡å…¥
          listContainer.style.opacity = '1';
        } catch (e) {
          console.error('[RandomPosts] Refresh error:', e);
          listContainer.style.opacity = '1';
        }
      }, 200);
    }

    /**
     * å¤„ç†ç‚¹å‡»äº‹ä»¶å†’æ³¡
     */
    const onGlobalClick = (e) => {
      const btn = e.target.closest('.js-refresh-trigger');
      if (btn) {
        refresh(btn);
      }
    };

    // åˆå§‹åŒ–ç›‘å¬
    document.addEventListener('click', onGlobalClick);

    // å¤„ç† Astro ViewTransitions å¯¼è‡´çš„é¡µé¢æ›¿æ¢
    document.addEventListener('astro:after-swap', () => {
      // ç§»é™¤æ—§ç›‘å¬é˜²æ­¢ç´¯åŠ ï¼Œé‡æ–°æ·»åŠ ä»¥ç¡®ä¿æ–° DOM ç”Ÿæ•ˆ
      document.removeEventListener('click', onGlobalClick);
      document.addEventListener('click', onGlobalClick);
    });

    /**
     * æ•°å­—å¢é•¿åŠ¨ç”»
     */
    const ANIMATION_DURATION = 1500; // åŠ¨ç”»æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰
    const FRAME_RATE = 60; // å¸§ç‡

    function animateNumber(element, target) {
      const isDecimal = target.toString().includes('.');
      const numericTarget = parseFloat(target);
      const startTime = performance.now();
      const startValue = 0;

      function update(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / ANIMATION_DURATION, 1);

        // ä½¿ç”¨ easeOutQuart ç¼“åŠ¨å‡½æ•°
        const easeProgress = 1 - Math.pow(1 - progress, 4);

        const currentValue = startValue + (numericTarget - startValue) * easeProgress;

        if (isDecimal) {
          element.textContent = currentValue.toFixed(1);
        } else {
          element.textContent = Math.floor(currentValue);
        }

        if (progress < 1) {
          requestAnimationFrame(update);
        } else {
          element.textContent = target;
        }
      }

      requestAnimationFrame(update);
    }

    // ä½¿ç”¨ Intersection Observer ç›‘å¬å…ƒç´ è¿›å…¥è§†å£
    const countUpObserver = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const element = entry.target;
          const target = element.getAttribute('data-target');

          if (target) {
            animateNumber(element, target);
            countUpObserver.unobserve(element);
          }
        }
      });
    }, {
      threshold: 0.1, // å½“å…ƒç´  10% å¯è§æ—¶è§¦å‘
      rootMargin: '0px 0px -50px 0px'
    });

    // åˆå§‹åŒ–æ—¶ç›‘å¬æ‰€æœ‰æ•°å­—å…ƒç´ 
    function initCountUpElements() {
      const countElements = document.querySelectorAll('.js-count-up');
      countElements.forEach((element) => {
        countUpObserver.observe(element);
      });
    }

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initCountUpElements);
    } else {
      initCountUpElements();
    }

    // å¤„ç† Astro ViewTransitions
    document.addEventListener('astro:after-swap', initCountUpElements);
  })();
</script>

<style>
  @keyframes refresh-spin-once {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .js-refresh-icon.is-spinning {
    animation: refresh-spin-once 600ms cubic-bezier(0.2, 0.9, 0.2, 1);
  }
</style>
