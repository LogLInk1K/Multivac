---
import { getCollection } from 'astro:content';
import MainLayout from '../../layouts/MainLayout.astro';
import LeftSidebar from '../../components/LeftSidebar.astro';
import RightSidebar from '../../components/RightSidebar.astro';
import BlogCard from '../../components/BlogCard.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../../consts';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<MainLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">

			<!-- 大屏幕：三栏布局 -->
			<!-- 中等屏幕：侧边栏上下排列在左，内容在右 -->
			<!-- 小屏幕：单列堆叠 -->
			<div class="grid grid-cols-1 gap-8">
				<!-- 大屏幕三栏布局 -->
				<div class="hidden xl:grid grid-cols-[256px_1fr_256px] gap-8">
					<!-- 左侧边栏 -->
					<div>
						<LeftSidebar />
					</div>

					<!-- 中间内容区 -->
					<div>
						<div class="grid grid-cols-1 gap-8">
							{posts.map((post) => (
								<BlogCard key={post.id} post={post} />
							))}
						</div>
					</div>

					<!-- 右侧边栏 -->
					<div>
						<RightSidebar />
					</div>
				</div>

				<!-- 中等屏幕布局 -->
				<div class="hidden md:grid lg:grid xl:hidden grid-cols-[256px_1fr] gap-8">
					<!-- 侧边栏堆叠区 -->
					<div class="space-y-8">
						<LeftSidebar />
						<RightSidebar />
					</div>

					<!-- 内容区域 -->
					<div class="grid grid-cols-1 gap-8">
						{posts.map((post) => (
							<BlogCard key={post.id} post={post} />
						))}
					</div>
				</div>

				<!-- 小屏幕布局 -->
				<div class="md:hidden space-y-8">
					<LeftSidebar />
					<div class="grid grid-cols-1 gap-8">
						{posts.map((post) => (
							<BlogCard key={post.id} post={post} />
						))}
					</div>
					<RightSidebar />
				</div>
			</div>
	</section>
</MainLayout>
